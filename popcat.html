<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>팝캣 로컬 구현</title>
    <style>
        /* CSS: 스타일링 */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
            user-select: none; /* 텍스트 선택 방지 */
        }
        #counter-box {
            font-size: 3em;
            margin-bottom: 20px;
            padding: 10px 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        #popcat-image {
            width: 300px;
            height: auto;
            cursor: pointer; /* 클릭 가능한 모양 */
            transition: transform 0.05s ease; /* 약간의 애니메이션 효과 */
        }
        #popcat-image:active {
            transform: scale(0.98); /* 클릭 시 약간 축소 */
        }
        .instruction {
            margin-top: 20px;
            color: #666;
        }
    </style>
</head>
<body>

    <div id="counter-box">0</div>
    <img id="popcat-image" src="귀엽다.png" alt="팝캣">
    <div class="instruction">마우스 클릭 또는 스페이스바를 누르세요!</div>

    <audio id="pop-sound" src="pop.mp3" preload="auto"></audio>
    <script>
        // JavaScript: 기능 구현
        
        const catImage = document.getElementById('popcat-image');
        const counterBox = document.getElementById('counter-box');
        const sound = document.getElementById('pop-sound');
        
        let count = 0;
        const closedImage = '귀엽다.png';
        const openImage = '귀엽다2.png';

        // 팝 (클릭/키 누름) 이벤트 핸들러
        function handlePop() {
            // 이미지 변경: 다문 고양이 -> 벌린 고양이
            catImage.src = openImage;
            
            // 카운트 증가 및 표시
            count++;
            counterBox.textContent = count;
            
            // 소리 재생 (소리 파일이 있는 경우)
            if (sound) {
                sound.currentTime = 0; // 소리를 처음부터 다시 재생
                sound.play();
            }

            // 잠시 후 이미지 복원: 벌린 고양이 -> 다문 고양이
            // 이미지 변경을 시각적으로 인지할 수 있도록 짧은 지연을 줍니다.
            setTimeout(() => {
                catImage.src = closedImage;
            }, 100); // 0.08초 후 복원 (원본 팝캣과 유사한 속도)
        }

        // 1. 마우스 클릭 이벤트
        catImage.addEventListener('mousedown', handlePop);
        
        // 2. 키보드 이벤트 (스페이스바)
        document.addEventListener('keydown', (e) => {
            // 스페이스바(e.code === 'Space')만 작동하도록 합니다.
            // 그리고 키를 누르고 있을 때 한 번만 작동하도록 합니다.
            if (e.code === 'Space' && !e.repeat) {
                e.preventDefault(); // 스페이스바의 기본 동작(스크롤) 방지
                handlePop();
            }
        });

    </script>

</body>
</html>